(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[77],{"8nqx":function(e,t,n){"use strict";n.r(t),n.d(t,"PersistentCodeEditorWrapper",(function(){return PersistentCodeEditorWrapper}));var a=n("ODXe"),l=n("sEfC"),o=n.n(l),c=n("yrBZ"),i=n("QqFe"),s=n("ZK4f"),r=n("q1tI"),u=n.n(r),d=n("/MKj"),b=n("dIjy"),m=n("z9KF"),f=n("c2gB"),O=n("QtoC"),E=n("GwnQ"),w=n("vfkt"),p=n("bCom"),j=n("rL5b"),h=n("wx14"),_=n("b+vN"),F=n("4Te6");const g=n("swBZ").components.code_editor,v={title:g.reset_workspace_confirmation_title,subtitle:g.reset_workspace_confirmation_content},AuthorModal=({fileName:e,closeModal:t})=>{const n=Object(f.c)(),a=n.updateFiles,l=n.openFile;return u.a.createElement(_.a,Object(h.a)({isOpen:!0,cancel:t,action:()=>{const n=new F.a({path:e,content:""});a([n]),l(e),t()}},(e=>({actionText:"Add File",title:`${e} does not exist`,subtitle:`${e} was set as a default file in Author but does not exist in the workspace yet.`}))(e)))},LearnerModal=({fileName:e,closeModal:t})=>{const n=Object(r.useState)(!1),l=Object(a.a)(n,2),o=l[0],c=l[1],i=Object(f.c)().restoreInitialSavepoint,cancelAndClose=()=>{t(),c(!1)};return o?u.a.createElement(_.a,Object(h.a)({isOpen:!0,cancel:cancelAndClose,action:()=>{cancelAndClose(),i()}},v)):u.a.createElement(_.a,Object(h.a)({isOpen:!0,cancel:cancelAndClose,action:()=>c(!0)},(e=>({actionText:"Reset Files",cancelText:"Ok",title:"Whoa there!",subtitle:`${e} has been moved. This will cause problems with this exercise, please move ${e} back to its original location, or reset your files.`}))(e)))},MissingFileModal=({defaultFiles:e})=>{const t=Object(d.useSelector)(O.b),n=Object(r.useState)(!1),l=Object(a.a)(n,2),o=l[0],c=l[1],i=Object(f.c)().files,s=void 0===i?{}:i,b=Object(r.useMemo)((()=>{const t=Object.keys(s);return 1!==t.length?e.find((e=>!s[e])):e.includes(t[0])?void 0:e[0]}),[e,s]);return o||!b?null:t?u.a.createElement(AuthorModal,{fileName:b,closeModal:()=>c(!0)}):u.a.createElement(LearnerModal,{fileName:b,closeModal:()=>c(!0)})};var S="loader__2h3yLmGmMRU1DEZmVhlSFw",k="codeEditor__1zGkuHOGsgQDqYDvB95kRZ",x=n("ytuh");let B;!function(e){e[e.Hidden=0]="Hidden",e[e.Review=1]="Review",e[e.Solution=2]="Solution"}(B||(B={}));const PersistentCodeEditorWrapper=({config:e,shouldShowCheckWorkButton:t=!1,toggleFullScreen:n})=>{const l=Object(f.c)(),h=l.files,_=l.currentFile,F=l.ready,g=l.openFile,v=l.openFiles,y=l.closeFile,C=l.requestFile,R=l.updateFile,D=l.fetchWorkspace,N=l.submitting,L=l.testResults,A=l.persistWorkspace,M=Object(d.useSelector)(O.b),G=_?null==h?void 0:h[_]:null,T=_&&Boolean(G),H=Object(r.useState)(!1),q=Object(a.a)(H,2),K=q[0],W=q[1],Z=e.no_run_button;Object(r.useEffect)((()=>{K&&D()}),[K,D]),Object(r.useEffect)((()=>{F&&_&&!T&&C(_)}),[_,T,F,C]);const Q=Object(r.useMemo)((()=>o()(A,2e3)),[A]),$=Object(r.useCallback)((e=>{R(e),Q()}),[Q,R]),z=(({submitting:e,testResults:t}={})=>{const n=Object(f.c)().workspaceSlug,l=Object(r.useState)(0),o=Object(a.a)(l,2),c=o[0],i=o[1],s=e||{},u=s.isSubmitting,d=s.hasSubmitted;switch(Object(r.useEffect)((()=>{d&&!u&&t&&i(t.pass?0:e=>e+1)}),[u,t,d]),Object(r.useEffect)((()=>{i(0)}),[n]),c){case 0:return B.Hidden;case 1:return B.Review;default:return B.Solution}})({submitting:N,testResults:L}),I=Object(r.useState)(),U=Object(a.a)(I,2),P=U[0],V=U[1],X=Object(r.useCallback)((()=>{W(!K)}),[W,K]),Y=u.a.createElement(u.a.Fragment,null,u.a.createElement(j.a,null),u.a.createElement("div",{className:S},u.a.createElement(m.a,null)));if(!F)return Y;const J=u.a.createElement(c.b,{center:!0,column:!0,flexGrow:1,"data-testid":"code-editor-placeholder"},u.a.createElement(s.a,{size:48}),u.a.createElement("div",{style:{marginTop:15}},"Code Editor"),!K&&u.a.createElement(i.d,{mt:24,onClick:()=>W(!0),variant:"secondary"},"Open file")),ee=v.length?Y:J,te=e.navigator_disabled&&!M,ne=Boolean(!t&&_),ae=!te&&K;return u.a.createElement(c.b,{flexDirection:"row",flexGrow:1,maxHeight:"100%"},ae&&u.a.createElement(b.a,{open:!0,toggleLayout:X}),e.files&&h&&u.a.createElement(MissingFileModal,{defaultFiles:e.files}),u.a.createElement(c.b,{flexBasis:"0%",flexDirection:"column",flexGrow:1,overflow:"hidden"},u.a.createElement(x.a,{toggleFullScreen:n,canCloseFiles:!te,canEditFiles:!te,currentFileName:_,openFiles:v,onOpenFile:g,onCloseFile:y,navOpen:K,onToggleNav:X}),u.a.createElement(c.b,{column:!0,flexGrow:1},T&&_?u.a.createElement(w.a,{className:k,file:h[_],key:_,onEditorLoad:V,updateFile:Z?$:R}):ee),u.a.createElement(p.a,{submitMode:E.d.RunAndTest,editor:P,showRunButton:ne,showReviewButton:z===B.Review,showSolutionButton:z===B.Solution,showPrettifyButton:!0})))};t.default=PersistentCodeEditorWrapper}}]);
//# sourceMappingURL=LayoutComponents-PersistentCodeEditor~dc7195f0.b27109cb5c9e93d9abc0.chunk.js.map